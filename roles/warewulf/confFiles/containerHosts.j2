{{ IncludeBlock "/etc/hosts" "# Do not edit after this line" }}
# This block is autogenerated by warewulf
# Host:   {{.BuildHost}}
# Time:   {{.BuildTime}}
# Source: {{.BuildSource}}


# Warewulf Server
{{$.Ipaddr}} warewulf {{$.BuildHost}} {{$.BuildHost}}.<CUSTOMER-DOMAIN>

{{- range $node := $.AllNodes}}                  {{/* for each node */}}
# Entry for {{$node.Id.Get}}:
{{/* if we have IPMI address on the node */}}
{{- if $node.Ipmi.Ipaddr.Defined}}{{$node.Ipmi.Ipaddr.Get}} {{$node.Id.Get}}-ipmi {{$node.Id.Get}}-bmc{{end}}
{{- range $devname, $netdev := $node.NetDevs}}   {{/* for each network device on the node */}}
{{- if $netdev.Ipaddr.Defined}}                  {{/* if we have an ip address on this network device */}}
{{- /* emit the node name as hostname if this is the primary */}}
{{$netdev.Ipaddr.Get}} {{$node.Id.Get}}-{{$devname}}
{{- if $netdev.Device.Defined}} {{$node.Id.Get}}-{{$netdev.Device.Get}}{{end}}
{{- if $netdev.Primary.GetB}} {{$node.Id.Get}}{{end}}
{{- end}} {{/* end if ip */}}
{{- end}} {{/* end for each network device */}}
{{- end}} {{/* end for each node */}}